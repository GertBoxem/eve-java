<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE PROJECT>
<project name="eve-google-appengine-builder" default="makejar" basedir=".">
  <target name="makejar" description="Create a jar from the EveGoogleAppengine project">
    <property name="localbin" location="bin" />
  	<property name="globalbin" location="../../bin/current" />
  	
  	<mkdir dir="${localbin}" />

  	<!-- create jar eve-core.jar and overwrite old one -->
    <jar destfile="${localbin}/eve-google-appengine-temp.jar" >
    	<fileset dir="war/WEB-INF/classes/" /> 
      <fileset dir="src/" />
    </jar>
  	<move 
  		file="${localbin}/eve-google-appengine-temp.jar" 
  		tofile="${localbin}/eve-google-appengine.jar" />

    <!-- copy jar to the global bin directory, 
         and create a zip file with all dependencies bundled -->
    <copy file="${localbin}/eve-google-appengine.jar" todir="${globalbin}" />
    <zip destfile="${globalbin}/eve-google-appengine-bundle.zip">
      <fileset dir="bin" includes="eve-google-appengine*" /> 
      <fileset dir="war/WEB-INF/lib/" 
      	includes="twig-persist-* guava-*" />     
    </zip>
	
  </target>
</project>
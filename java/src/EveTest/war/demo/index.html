<!doctype html>
<html xmlns:ng="http://angularjs.org">
<head>
    <title>Eve Planning Demo</title>

    <link type="text/css" rel="stylesheet" href="style.css">

    <script src='lib/jquery-1.7.2.min.js'></script>
    <script src="lib/angular-0.9.19.min.js" ng:autobind></script>
    <script src="controller.js" type="text/javascript" ></script>

</head>
<body ng:controller="Ctrl">
<div id="container">
    <h1>Eve Planning Demo</h1>
    <p>
        The Eve Planning Library contains calendar agents and meeting agents.
        Calendar agents can access a persons calendar,
        and meeting agents can dynamically plan meetings in calendars via calendar
        agents.
    </p>

    <h2>Calendar Agents</h2>

    <p>
        Add and remove rows in the list with calendar agents, and enter
        an id for the agent.
        If an agent is new, use "Authorize" to set its authorization to your Google account.
        To delete an agent permanently, click "Delete".
    </p>

    <table>
        <tr>
            <th>Id</th>
            <th>Url</th>
            <th>Username</th>
            <th>Email</th>
            <th>Actions</th>
            <td class="noborder">
                <a href="" class="add" ng:click="addCalendarAgent()" title="Add an agent">&plus;</a>
            </td>
        </tr>
        <tr ng:repeat="agent in calendarAgents">
            <td>
                <input type="text" name="agent.id" placeholder="id" ng:change="updateCalendarAgent(agent)"/>
            </td>
            <td>
                <a href="{{MEETING_AGENT_URI + agent.id}}">{{agent.id}}</a>
            </td>
            <td>
                <span ng:hide="agent.usernameUpdating">{{agent.username}}</span>
                <span ng:show="agent.usernameUpdating" class="loading">loading...</span>
            </td>
            <td>
                <span ng:hide="agent.emailUpdating">{{agent.email}}</span>
                <span ng:show="agent.emailUpdating" class="loading">loading...</span>
                <button ng:click="authorizeCalendarAgent(agent)"
                        ng:hide="agent.email || agent.emailUpdating"
                        title="Give this agent access to Google Calendar">
                    Authorize</button>
            </td>
            <td>
                <button ng:click="deleteCalendarAgent(agent)"
                        title="Delete the agent and remove it from the list">
                    Delete</button>
            </td>
            <td class="noborder">
                <a href="" class="remove" ng:click="removeCalendarAgent(agent)"
                   title="Remove the agent from this list. The agent will not be deleted">&times;</a>
            </td>
        </tr>
    </table>

    <h2>Meeting Agents</h2>

    <p>
        Meeting agents can dynamically plan a meeting for one or multiple attendees.
    </p>

    <table>
        <tr>
            <th>Id</th>
            <th>Url</th>
            <th>Summary</th>
            <th>Location</th>
            <th>Duration (min)</th>
            <th>Attendees</th>
            <th>Status</th>
            <th>Actions</th>
            <td class="noborder">
                <a href="" class="add" ng:click="addMeetingAgent()" title="Add an agent">&plus;</a>
            </td>
        </tr>
        <tr ng:repeat="agent in meetingAgents">
            <td>
                <input name="agent.id" type="text" placeholder="id" ng:change="save()" />
            </td>
            <td>
                <a href="{{MEETING_AGENT_URI + agent.id}}">{{agent.id}}</a>
            </td>
            <td>
                <input name="agent.summary" type="text" placeholder="summary" ng:change="save()" />
            </td>
            <td>
                <input name="agent.location" type="text" placeholder="location" ng:change="save()" />
            </td>
            <td>
                <input name="agent.duration" type="text" placeholder="duration (min)" value="60" ng:change="save()" />
            </td>
            <td>
                <div ng:repeat="attendee in agent.attendees">
                    <input name="attendee.id" type="text" placeholder="id" ng:change="save()" />
                    <a href="" class="remove" ng:click="removeAttendee(agent, attendee)"
                            title="Remove Attendee">&times;</a>
                </div>
                <div>
                    <a href="" class="add" ng:click="addAttendee(agent)"
                       title="Add an attendee">&plus;</a>
                </div>
            </td>
            <td>
                <span ng:show="agent.start">Start: {{agent.start}}<br></span>
                <span ng:show="agent.end">End: {{agent.end}}</span>
            </td>
            <td>
                <button ng:click="setActivityMeetingAgent (agent)"
                        disabled="{{agent.saving}}"
                        title="Send the settings to the MeetingAgent">
                    Set</button>

                <button ng:click="updateMeetingAgent(agent)"
                        disabled="{{agent.updating}}"
                        title="Let the MeetingAgent perform an update: synchronize the event">
                    Update</button>

                <!-- TODO: implement delete
                <button ng:click="deleteCalendarAgent(agent)"
                        title="Delete the agent and remove it from the list">
                    Delete</button>
                -->
            </td>
            <td class="noborder">
                <a href="" class="remove" ng:click="removeMeetingAgent(agent)"
                   title="Remove the agent from this list. The agent will not be deleted">&times;</a>
            </td>
        </tr>
    </table>



</div>
</body>
</html>